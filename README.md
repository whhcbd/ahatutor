1# AhaTutor - é—ä¼ å­¦å¯è§†åŒ–äº¤äº’è§£ç­”å¹³å°

> åŸºäº AI çš„é—ä¼ å­¦å­¦ä¹ å¹³å°ï¼Œå®ç°"è‡ªç„¶è¯­è¨€è¾“å…¥ + AIç†è§£ + å®æ—¶å¯è§†åŒ– + äº¤äº’æ¢ç´¢"ï¼Œæ‰“é€ çœŸæ­£çš„"é¡¿æ‚Ÿæ—¶åˆ»"(Aha Moment)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.5-blue)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-19-61DAFB)](https://react.dev/)
[![NestJS](https://img.shields.io/badge/NestJS-10-E0234E)](https://nestjs.com/)
[![Strict Mode](https://img.shields.io/badge/TypeScript-Strict_Mode-3178c6)](https://www.typescriptlang.org/tsconfig#strict)

---

## é¡¹ç›®æ¦‚è¿°

**AhaTutor** æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å­¦ç§‘å­¦ä¹ å¹³å°ï¼Œé€šè¿‡å…­ Agent åä½œæµæ°´çº¿ï¼Œå°†å¤æ‚çš„æ¦‚å¿µè½¬åŒ–ä¸ºï¼š

- ğŸ“Š **å¯è§†åŒ–çŸ¥è¯†å›¾è°±** - ä¸€çœ¼çœ‹ç©¿æ¦‚å¿µå…³ç³»
- ğŸ“– **ç”ŸåŠ¨å­¦ä¹ å™äº‹** - æ•…äº‹åŒ–è®²è§£ï¼Œè®°å¿†æ·±åˆ»
- â“ **æ™ºèƒ½é¢˜ç›®ç”Ÿæˆ** - ç²¾å‡†ç»ƒä¹ ï¼Œä¸¾ä¸€åä¸‰
- ğŸŒ **è”ç½‘èµ„æºæ¨è** - æœ€æ–°èµ„è®¯ï¼Œæ‰©å±•è§†é‡

**MVP å­¦ç§‘**: é—ä¼ å­¦

---

## åŠŸèƒ½å®ç°çŠ¶æ€

### âœ… å·²å®ŒæˆåŠŸèƒ½

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|:------:|------|
| **å…­ Agent æµæ°´çº¿** | âœ… | å®Œæ•´çš„æ¦‚å¿µåˆ†æåˆ°é¢˜ç›®ç”Ÿæˆæµç¨‹ |
| **RAG æ¡†æ¶** | âœ… | å‘é‡æ£€ç´¢ã€æ··åˆæŸ¥è¯¢ã€æ–‡æ¡£è§£æ |
| **LLM å¤šç®¡é“** | âœ… | OpenAI/Claude/DeepSeek/GLMï¼Œæµå¼è¾“å‡º |
| **é€Ÿé€šæ¨¡å¼å‰ç«¯** | âœ… | å®Œæ•´åˆ·é¢˜æµç¨‹ï¼ˆå‡ºé¢˜â†’ç­”é¢˜â†’åˆ¤æ–­â†’è‡ªè¯„â†’è§£æï¼‰ |
| **çŸ¥è¯†å›¾è°±** | âœ… | Neo4j + D3.js åŠ›å¯¼å‘å›¾ |
| **é”™é¢˜ç®¡ç†** | âœ… | OCR è¯†åˆ« + ä¸¾ä¸€åä¸‰å˜å¼ç»ƒä¹  |
| **å­¦æƒ…æŠ¥å‘Š** | âœ… | æ•°æ®ç»Ÿè®¡ + ECharts å›¾è¡¨ |
| **Agent Skills** | âœ… | è”ç½‘æœç´¢ + èµ„æºæ¨è |
| **TypeScript ä¸¥æ ¼æ¨¡å¼** | âœ… | å®Œæ•´çš„ç±»å‹å®‰å…¨ï¼Œé›¶ç¼–è¯‘é”™è¯¯ |
| **å¤šæ¨¡æ€å†…å®¹æ”¯æŒ** | âœ… | LLM æœåŠ¡æ”¯æŒæ–‡æœ¬å’Œå›¾åƒå†…å®¹ |

### â³ å¾…å®ŒæˆåŠŸèƒ½

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|:------:|------|
| **AuthModule** | â³ | ç”¨æˆ·è®¤è¯æ¨¡å— |
| **QuizModule** | â³ | æ™ºèƒ½ç»„å·æœåŠ¡ |
| **CacheModule** | â³ | Redis ç¼“å­˜ä¼˜åŒ– |

---

## å…­ Agent åä½œæµæ°´çº¿

```
ç”¨æˆ·è¾“å…¥ "ä¼´æ€§é—ä¼ "
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 1: ConceptAnalyzer                â”‚ âœ…
â”‚ "è¿™çœŸæ­£åœ¨é—®ä»€ä¹ˆï¼Ÿ"                        â”‚
â”‚ â†’ ç»“æ„åŒ–æ¦‚å¿µåˆ†æï¼ˆé¢†åŸŸã€å¤æ‚åº¦ã€å¯è§†åŒ–æ½œåŠ›ï¼‰â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 2: PrerequisiteExplorer â­         â”‚ âœ…
â”‚ "ç†è§£è¿™ä¸ªå‰éœ€è¦å…ˆæ‡‚ä»€ä¹ˆï¼Ÿ"                 â”‚
â”‚ â†’ é—ä¼ å­¦çŸ¥è¯†æ ‘ï¼ˆé€’å½’åˆ†è§£åˆ°åŸºç¡€æ¦‚å¿µï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 3: GeneticsEnricher               â”‚ âœ…
â”‚ "ç²¾ç¡®çš„é—ä¼ å­¦åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"                 â”‚
â”‚ â†’ é—ä¼ å­¦å…¬å¼ã€å®šå¾‹ã€å®éªŒã€ä¾‹å­             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 4: VisualDesigner                 â”‚ âœ…
â”‚ "å¦‚ä½•å±•ç¤ºè¿™ä¸ªæ¦‚å¿µï¼Ÿ"                       â”‚
â”‚ â†’ çŸ¥è¯†å›¾è°±å¯è§†åŒ–ã€åŠ¨ç”»è®¾è®¡ã€é¢œè‰²æ–¹æ¡ˆ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 5: NarrativeComposer              â”‚ âœ…
â”‚ "è¿æ¥è¿™äº›æ¦‚å¿µçš„æ•…äº‹æ˜¯ä»€ä¹ˆï¼Ÿ"               â”‚
â”‚ â†’ å­¦ä¹ è·¯å¾„ã€è®²è§£é¡ºåºã€çŸ¥è¯†ç‚¹ä¸²è”           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 6: QuizGenerator                  â”‚ âœ…
â”‚ "å¦‚ä½•ç”Ÿæˆé¢˜ç›®å’Œè¯„ä¼°ï¼Ÿ"                    â”‚
â”‚ â†’ é€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€è§£æã€ç­‰çº§ç³»ç»Ÿ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
         å®Œæ•´çš„å­¦ä¹ ä½“éªŒ
```

---

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1. é€Ÿé€šæ¨¡å¼ï¼ˆçŸ­æ—¶è®°å¿†ï¼‰

**ç›®æ ‡ç”¨æˆ·**: è€ƒå‰çªå‡»ã€å¿«é€Ÿå¤ä¹ ã€å³æ—¶ç­”ç–‘

```
AI å‡ºé¢˜ â†’ ç”¨æˆ·å›ç­” â†’ AI åˆ¤æ–­ â†’ ç”¨æˆ·è‡ªè¯„ â†’ åˆ†çº§è§£æ â†’ ç»§ç»­ä¸‹ä¸€é¢˜
    â†“                                                        â†“
 ä½çº§é”™è¯¯ï¼ˆç¬”è¯¯ï¼‰â†’ ç»§ç»­åˆ·é¢˜         é«˜çº§é”™è¯¯ï¼ˆçŸ¥è¯†æ€§ï¼‰â†’ è¿›å…¥è§£ç­”æ¨¡å¼
```

### 2. æ·±åº¦æ¨¡å¼ï¼ˆé•¿æ—¶è®°å¿†ï¼‰

**ç›®æ ‡ç”¨æˆ·**: ç³»ç»Ÿå­¦ä¹ ã€æ·±åº¦ç ”ç©¶ã€é•¿æœŸè§„åˆ’

**æ ¸å¿ƒåˆ›æ–°ï¼šåå‘çŸ¥è¯†æ ‘**
```
ç”¨æˆ·è¾“å…¥ï¼š"è§£é‡Šä¼´æ€§é—ä¼ "
  â†“
ğŸŒ³ åå‘é€’å½’åˆ†è§£ï¼š
  "ç†è§£ä¼´æ€§é—ä¼ å‰éœ€è¦å…ˆæ‡‚ä»€ä¹ˆï¼Ÿ"
    â†’ ä¼´æ€§é—ä¼ å‰éœ€è¦ï¼šå­Ÿå¾·å°”å®šå¾‹ã€æ€§æŸ“è‰²ä½“
      â†’ å­Ÿå¾·å°”å®šå¾‹å‰éœ€è¦ï¼šåŸºå› å‹/è¡¨å‹ã€åˆ†ç¦»å®šå¾‹
        â†’ åŸºå› å‹å‰éœ€è¦ï¼šåŸºå› æ¦‚å¿µã€æŸ“è‰²ä½“åŸºç¡€ âœ“
  â†“
ğŸ¯ ä»åŸºç¡€å‘ä¸Šæ„å»ºå­¦ä¹ è·¯å¾„
```

### 3. Agent Skills

| Skill | åŠŸèƒ½ | API |
|-------|------|-----|
| **è”ç½‘æœç´¢** | å®æ—¶æ£€ç´¢æœ€æ–°é—ä¼ å­¦èµ„è®¯ | `POST /agent/skills/search` |
| **èµ„æºæ¨è** | æ ¹æ®å­¦ä¹ è¿›åº¦æ¨èè§†é¢‘/æ–‡çŒ® | `POST /agent/skills/resources` |

### 4. é”™é¢˜ç®¡ç†

- ğŸ“· æ‹ç…§ä¸Šä¼ é”™é¢˜ï¼ˆè°ƒç”¨è®¾å¤‡ç›¸æœºï¼‰
- ğŸ” OCR è‡ªåŠ¨è¯†åˆ«é¢˜ç›®å†…å®¹ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰
- ğŸ”„ ä¸¾ä¸€åä¸‰ï¼šåŸºäºé”™é¢˜è‡ªåŠ¨ç”Ÿæˆç›¸ä¼¼é¢˜
- ğŸ“ é”™é¢˜åˆ†ç±»å­˜å‚¨å’Œä¸ªäººé”™é¢˜åº“

### 5. å­¦æƒ…æŠ¥å‘Š

- ğŸ“Š æ—¥/å‘¨/ä¸“é¢˜æŠ¥å‘Š
- ğŸ“‰ è–„å¼±ç‚¹åˆ†æã€é”™è¯¯åŸå› ç»Ÿè®¡
- ğŸ•¸ï¸ çŸ¥è¯†ç‚¹æŒæ¡åº¦é›·è¾¾å›¾

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯å±‚

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 19 | UI æ¡†æ¶ |
| TypeScript | 5.5 | ç±»å‹å®‰å…¨ï¼ˆStrict Modeï¼‰ |
| Vite | 7 | æ„å»ºå·¥å…· |
| Zustand / Redux | - | çŠ¶æ€ç®¡ç† |
| Framer Motion | - | åŠ¨ç”»åº“ |
| D3.js | - | çŸ¥è¯†å›¾è°±å¯è§†åŒ– |
| ECharts | - | ç»Ÿè®¡å›¾è¡¨ |
| KaTeX | - | æ•°å­¦å…¬å¼æ¸²æŸ“ |
| TanStack Query | - | æ•°æ®è·å– |

### åç«¯å±‚

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| NestJS | 10 | API æ¡†æ¶ |
| TypeScript | 5.5 | ç±»å‹å®‰å…¨ï¼ˆStrict Modeï¼‰ |
| Neo4j Driver | 5.x | å›¾æ•°æ®åº“è¿æ¥ |
| Pinecone | - | å‘é‡å­˜å‚¨ |

### AI å±‚

| æœåŠ¡ | æä¾›å•† | ç”¨é€” |
|------|--------|------|
| OpenAI | GPT-4 | é€šç”¨åœºæ™¯ã€ä»£ç ç”Ÿæˆã€è§†è§‰ç†è§£ |
| Anthropic | Claude | å¤æ‚æ¨ç†ã€é•¿æ–‡æœ¬ã€å›¾åƒåˆ†æ |
| DeepSeek | - | æˆæœ¬ä¼˜åŒ–ã€ä¸­æ–‡ç†è§£ |
| GLM | - | å›½äº§æ¨¡å‹æ”¯æŒ |

### æ•°æ®å­˜å‚¨

| æ•°æ®åº“ | ç”¨é€” |
|--------|------|
| Neo4j | çŸ¥è¯†å›¾è°±å­˜å‚¨ä¸æŸ¥è¯¢ |
| Pinecone | å‘é‡æ£€ç´¢ |
| Redis | ç¼“å­˜ã€ä¼šè¯ç®¡ç†ï¼ˆè®¡åˆ’ä¸­ï¼‰ |

---

## ç±»å‹ç³»ç»Ÿäº®ç‚¹

é¡¹ç›®é‡‡ç”¨ **TypeScript Strict Mode**ï¼Œç¡®ä¿å®Œæ•´çš„ç±»å‹å®‰å…¨ï¼š

### æ ¸å¿ƒç±»å‹å®šä¹‰

```typescript
// å¤šæ¨¡æ€æ¶ˆæ¯å†…å®¹
export type ChatMessageContent = string | Array<ChatMessageTextPart | ChatMessageImagePart>;

// é—ä¼ å­¦æšä¸¾
export enum GeneticsLaw {
  MENDEL_FIRST = 'mendel_first_law',      // åˆ†ç¦»å®šå¾‹
  MENDEL_SECOND = 'mendel_second_law',    // è‡ªç”±ç»„åˆå®šå¾‹
  LINKAGE = 'linkage_law',                // è¿é”å®šå¾‹
  SEX_LINKED = 'sex_linked_inheritance',  // ä¼´æ€§é—ä¼ 
}

// LLM æä¾›å•†ç±»å‹å®‰å…¨çš„å“åº”
interface LLMResponse {
  content: string;
  model: string;
  usage: {
    promptTokens: number;
    completionTokens: number;
    totalTokens: number;
  };
}
```

### ç±»å‹ä¿®å¤è®°å½•

| é—®é¢˜ç±»åˆ« | ä¿®å¤æ–¹æ¡ˆ |
|----------|----------|
| Neo4j Record ç±»å‹å†²çª | ä½¿ç”¨ `Record as Neo4jRecord` åˆ«å |
| å¤šæ¨¡æ€å†…å®¹ç±»å‹ | æ‰©å±• `ChatMessageContent` è”åˆç±»å‹ |
| æšä¸¾ç±»å‹ä¸åŒ¹é… | ç»Ÿä¸€ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡åˆ°æšä¸¾è½¬æ¢ |
| LLM å“åº”ç±»å‹ | æ·»åŠ å®Œæ•´çš„å“åº”æ¥å£å®šä¹‰ |

---

## é¡¹ç›®ç»“æ„

```
ahatutor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ frontend/                        # React å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/                    # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ agent.ts            # Agent API
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Visualization/      # å¯è§†åŒ–ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KnowledgeGraph.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VisualDesignerView.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ NarrativeComposerView.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SpeedMode/          # é€Ÿé€šæ¨¡å¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DepthMode/          # æ·±åº¦æ¨¡å¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MistakeBook/        # é”™é¢˜æœ¬
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Report/             # å­¦æƒ…æŠ¥å‘Š
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                  # é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ backend/                         # NestJS åç«¯
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ modules/
â”‚   â”‚       â”‚   â”œâ”€â”€ agents/              # å…­ Agent æµæ°´çº¿
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ agent-pipeline.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ concept-analyzer.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ prerequisite-explorer.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ genetics-enricher.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ visual-designer.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ narrative-composer.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ quiz-generator.service.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ skills/          # Agent Skills
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ web-search.service.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ resource-recommend.service.ts
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ agent.controller.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ llm/                 # LLM å¤šç®¡é“
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ llm.service.ts   # ç»Ÿä¸€æ¥å£
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ providers/       # å„å‚å•†é€‚é…å™¨
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ openai.provider.ts
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ claude.provider.ts
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ deepseek.provider.ts
â”‚   â”‚       â”‚   â”‚       â””â”€â”€ glm.provider.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ rag/                 # RAG æ¡†æ¶
â”‚   â”‚       â”‚   â”œâ”€â”€ knowledge-graph/     # çŸ¥è¯†å›¾è°±
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ neo4j.service.ts
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ graph.service.ts
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ graph-builder.service.ts
â”‚   â”‚       â”‚   â”‚       â””â”€â”€ path-finder.service.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ mistake/             # é”™é¢˜ç®¡ç†
â”‚   â”‚       â”‚   â””â”€â”€ report/              # å­¦æƒ…æŠ¥å‘Š
â”‚   â”‚       â”œâ”€â”€ shared/
â”‚   â”‚       â”‚   â””â”€â”€ types/               # å…±äº«ç±»å‹å®šä¹‰
â”‚   â”‚       â””â”€â”€ app.module.ts
â”‚   â”‚
â”‚   â””â”€â”€ shared/                          # å‰åç«¯å…±äº«ä»£ç 
â”‚       â””â”€â”€ types/                       # ç±»å‹å®šä¹‰
â”‚           â”œâ”€â”€ agent.types.ts
â”‚           â”œâ”€â”€ genetics.types.ts
â”‚           â”œâ”€â”€ rag.types.ts
â”‚           â””â”€â”€ skill.types.ts
â”‚
â”œâ”€â”€ documents/                           # æ•™ææ–‡æ¡£
â”œâ”€â”€ prompts/                             # Prompt æ¨¡æ¿
â”œâ”€â”€ docker-compose.yml                   # æœ¬åœ°å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-workspace.yaml                  # pnpm å·¥ä½œåŒºé…ç½®
â””â”€â”€ README.md
```

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- pnpm 8+ï¼ˆæ¨èï¼‰
- Neo4jï¼ˆå¯é€‰ï¼Œç”¨äºçŸ¥è¯†å›¾è°±ï¼‰
- LLM API Keyï¼ˆOpenAI/Claude/DeepSeek è‡³å°‘ä¸€ä¸ªï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/ahatutor.git
cd ahatutor
```

### 2. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `src/backend/.env`:

```env
# LLM é…ç½®ï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
DEFAULT_LLM_PROVIDER=openai
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_claude_key
DEEPSEEK_API_KEY=your_deepseek_key
GLM_API_KEY=your_glm_key

# æ•°æ®åº“é…ç½®
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=ahatutor123

# Pinecone å‘é‡æ•°æ®åº“
PINECONE_API_KEY=your_pinecone_key
PINECONE_ENVIRONMENT=your_environment
PINECONE_INDEX=ahatutor

# ç½‘ç»œæœç´¢ï¼ˆå¯é€‰ï¼‰
WEB_SEARCH_PROVIDER=mock  # tavily | bing | mock
WEB_SEARCH_API_KEY=your_search_key
```

åˆ›å»º `src/frontend/.env.local`:

```env
VITE_API_BASE_URL=http://localhost:3000
```

### 4. å¯åŠ¨æ•°æ®åº“æœåŠ¡

```bash
# å¯åŠ¨ Neo4jï¼ˆä½¿ç”¨ Dockerï¼‰
docker-compose up -d neo4j
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨åç«¯ï¼ˆç«¯å£ 3000ï¼‰
cd src/backend
pnpm run start:dev

# å¯åŠ¨å‰ç«¯ï¼ˆç«¯å£ 5173ï¼‰
cd src/frontend
pnpm run dev
```
  
### 6. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:5173`

---

## API æ–‡æ¡£

### å…­ Agent æµæ°´çº¿

```typescript
// æ‰§è¡Œå®Œæ•´æµæ°´çº¿
POST /agent/pipeline
{
  "concept": "ä¼´æ€§é—ä¼ ",
  "userLevel": "intermediate",
  "focusAreas": ["quiz"]
}

// å¿«é€Ÿåˆ†æ
GET /agent/quick?concept=ä¼´æ€§é—ä¼ 

// ç”Ÿæˆå­¦ä¹ è·¯å¾„
GET /agent/learning-path?concept=ä¼´æ€§é—ä¼ &userLevel=intermediate
```

### VisualDesigner

```typescript
// è®¾è®¡å¯è§†åŒ–æ–¹æ¡ˆ
POST /agent/visualize
{
  "concept": "ä¼´æ€§é—ä¼ ",
  "includeEnrichment": true,
  "includePrerequisites": true
}

// ç”Ÿæˆå¯è§†åŒ–ä»£ç 
GET /agent/visualize/code?concept=ä¼´æ€§é—ä¼ 
```

### NarrativeComposer

```typescript
// åˆ›å»ºå­¦ä¹ å™äº‹
POST /agent/narrative
{
  "concept": "ä¼´æ€§é—ä¼ ",
  "userLevel": "intermediate"
}

// ç”Ÿæˆè¯¦ç»†å­¦ä¹ è„šæœ¬
POST /agent/narrative/script

// ç”Ÿæˆäº’åŠ¨å¼å­¦ä¹ æµç¨‹
POST /agent/narrative/interactive
```

### Agent Skills

```typescript
// è”ç½‘æœç´¢
POST /agent/skills/search
{
  "query": "é—ä¼ å­¦ ä¼´æ€§é—ä¼  æœ€æ–°ç ”ç©¶",
  "numResults": 5,
  "language": "zh"
}

// æ¨èå­¦ä¹ èµ„æº
POST /agent/skills/resources
{
  "concept": "ä¼´æ€§é—ä¼ ",
  "userLevel": "intermediate",
  "preferredTypes": ["video", "article"],
  "count": 5
}
```

---

## å‰ç«¯ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

```tsx
import { VisualDesignerView } from './components/Visualization/VisualDesignerView';
import { NarrativeComposerView } from './components/Visualization/NarrativeComposerView';
import { InteractiveFlowView } from './components/Visualization/NarrativeComposerView';

// æ¦‚å¿µæ¢ç´¢é¡µé¢
function ConceptPage({ concept }) {
  return (
    <div className="grid grid-cols-2 gap-6">
      {/* å¯è§†åŒ–å±•ç¤º */}
      <VisualDesignerView
        concept={concept}
        userLevel="intermediate"
      />

      {/* å­¦ä¹ å™äº‹ */}
      <NarrativeComposerView
        concept={concept}
        userLevel="intermediate"
      />
    </div>
  );
}

// äº’åŠ¨å¼å­¦ä¹ æµç¨‹
function InteractiveLearningPage({ concept }) {
  return (
    <InteractiveFlowView
      concept={concept}
      userLevel="beginner"
    />
  );
}
```

---

## å¼€å‘è·¯çº¿å›¾

### âœ… Phase 1: æ ¸å¿ƒåŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰

- [x] å…­ Agent æµæ°´çº¿
- [x] RAG æ¡†æ¶
- [x] LLM å¤šç®¡é“
- [x] Agent Skills
- [x] å‰åç«¯ API å¯¹æ¥
- [x] TypeScript Strict Mode ç±»å‹ä¿®å¤

### ğŸ”„ Phase 2: ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆè¿›è¡Œä¸­ï¼‰

- [ ] å‰ç«¯é¡µé¢å®Œå–„
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é”™è¯¯å¤„ç†ä¼˜åŒ–

### â³ Phase 3: é«˜çº§åŠŸèƒ½ï¼ˆè®¡åˆ’ä¸­ï¼‰

- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] å­¦ä¹ è¿›åº¦æŒä¹…åŒ–
- [ ] è‰¾å®¾æµ©æ–¯å¤ä¹ è®¡åˆ’
- [ ] å¤šæ¨¡æ€æ”¯æŒï¼ˆæ‰‹å†™è¯†åˆ«ï¼‰

---

## éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- âœ… èƒ½åŸºäºé—ä¼ å­¦çŸ¥è¯†å›ç­”åŸºæœ¬é—®é¢˜
- âœ… å…­ Agent æµæ°´çº¿å®Œæ•´è¿è¡Œ
- âœ… é€Ÿé€šæ¨¡å¼å®Œæ•´æµç¨‹å¯è¿è¡Œ
- âœ… çŸ¥è¯†å›¾è°±æ­£ç¡®å±•ç¤ºæ¦‚å¿µå…³ç³»
- âœ… å­¦ä¹ å™äº‹ç”Ÿæˆè¿è´¯çš„æ•…äº‹
- âœ… TypeScript ä¸¥æ ¼æ¨¡å¼é›¶ç¼–è¯‘é”™è¯¯

### æ€§èƒ½éªŒæ”¶

| æŒ‡æ ‡ | ç›®æ ‡ |
|------|------|
| æµæ°´çº¿å“åº” | < 10s |
| æµå¼è¾“å‡ºå»¶è¿Ÿ | < 500ms |
| çŸ¥è¯†å›¾è°±æ¸²æŸ“ | < 2s |
| é¡µé¢é¦–å±åŠ è½½ | < 3s |

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)

---

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

---

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [https://github.com/your-username/ahatutor](https://github.com/your-username/ahatutor)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-username/ahatutor/issues)

---

**è®©æ¯ä¸€æ¬¡å­¦ä¹ éƒ½æˆä¸º"é¡¿æ‚Ÿæ—¶åˆ»"** âœ¨
